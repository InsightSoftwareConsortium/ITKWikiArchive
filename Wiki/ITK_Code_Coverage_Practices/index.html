
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html dir="ltr" lang="en">
<head>
<title>ITK Code Coverage Practices</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="MediaWiki 1.16.1" name="generator"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/Wiki/opensearch_desc.php" rel="search" title="KitwarePublic (en)" type="application/opensearchdescription+xml"/>
<link href="/Wiki/index.php?title=ITK_Code_Coverage_Practices&amp;action=creativecommons" rel="meta" title="Creative Commons" type="application/rdf+xml"/>
<link href="http://creativecommons.org/licenses/by/2.5/" rel="copyright"/>
<link href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="KitwarePublic Atom feed" type="application/atom+xml"/>
<link href="/Wiki/skins/common/shared.css?270" media="screen" rel="stylesheet"/>
<link href="/Wiki/skins/common/commonPrint.css?270" media="print" rel="stylesheet"/>
<link href="/Wiki/skins/monobook/main.css?270" media="screen" rel="stylesheet"/>
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/Wiki/skins/monobook/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/Wiki/skins/monobook/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/Wiki/skins/monobook/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/Wiki/skins/monobook/IE70Fixes.css?270" media="screen" /><![endif]-->
<link href="/Wiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" rel="stylesheet"/>
<link href="/Wiki/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" rel="stylesheet"/>
<link href="/Wiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" rel="stylesheet"/>
<link href="/Wiki/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" rel="stylesheet"/>
<script>
var skin="monobook",
stylepath="/Wiki/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/Wiki/$1",
wgScriptPath="/Wiki",
wgScriptExtension=".php",
wgScript="/Wiki/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://www.itk.org",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="ITK_Code_Coverage_Practices",
wgTitle="ITK Code Coverage Practices",
wgAction="view",
wgArticleId=9211,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=42559,
wgVersion="1.16.1",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "KitwarePublic", "5": "KitwarePublic talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "kitwarepublic": 4, "kitwarepublic_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "image": 6, "image_talk": 7},
wgSiteName="KitwarePublic",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script><script src="/Wiki/skins/common/wikibits.js?270"></script>
<script src="/Wiki/skins/common/ajax.js?270"></script>
<script src="/Wiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook&amp;270"></script>
</head>
<body class="mediawiki ltr ns-0 ns-subject page-ITK_Code_Coverage_Practices skin-monobook"><!-- start content -->
<table class="toc" id="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_to_compute_Code_Coverage_locally"><span class="tocnumber">2</span> <span class="toctext">How to compute Code Coverage locally</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Step_1"><span class="tocnumber">2.1</span> <span class="toctext">Step 1</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Step_2"><span class="tocnumber">2.2</span> <span class="toctext">Step 2</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Step_3"><span class="tocnumber">2.3</span> <span class="toctext">Step 3</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Step_4"><span class="tocnumber">2.4</span> <span class="toctext">Step 4</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Step_5"><span class="tocnumber">2.5</span> <span class="toctext">Step 5</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<p><br/>
</p>
<h1> <span class="mw-headline" id="Overview"> Overview </span></h1>
<ul><li> The target code coverage is 95%
</li><li> Historically we have only achieved 84%.
</li><li> The practices described in this page should help us reach the target.
</li></ul>
<h1> <span class="mw-headline" id="How_to_compute_Code_Coverage_locally"> How to compute Code Coverage locally </span></h1>
<h2> <span class="mw-headline" id="Step_1"> Step 1 </span></h2>
<ul><li> Use Linux or Mac
</li></ul>
<h2> <span class="mw-headline" id="Step_2"> Step 2 </span></h2>
<ul><li> Add the CMake flags:
</li></ul>
<pre>      CMAKE_CXX_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage
      CMAKE_C_FLAGS:STRING= -g -O0  -fprofile-arcs -ftest-coverage
</pre>
<h2> <span class="mw-headline" id="Step_3"> Step 3 </span></h2>
<ul><li> Configure to compile ITK for Debug
</li><li> by setting the CMake variable
</li></ul>
<pre>                    CMAKE_BUILD_TYPE  Debug
</pre>
<h2> <span class="mw-headline" id="Step_4"> Step 4 </span></h2>
<ul><li> From the binary directory type the "ctest" expression that select the tests that you want use to generate coverage (Ideally this should only need to be the unit tests of the class in question).
</li><li> For example:
</li></ul>
<pre>               ctest  -R   itkHDF5ImageIOTest   -V   -N
</pre>
<ul><li> This will print to the console the command line instructions needed to run the tests (-V option), but without running the tests (-N option).
</li></ul>
<h2> <span class="mw-headline" id="Step_5"> Step 5 </span></h2>
<ul><li> From the binary directory type the path to this script in the ITK source tree and add the selection expression that you put in front of ctest.
</li><li> For example:
</li></ul>
<pre>       computeCodeCoverageLocallyForOneTest.sh ./Modules/IO/HDF5 -R  itkHDF5ImageIOTest
</pre>
<ul><li> This will run the selected tests in ITK and generate code coverage for the entire toolkit, but only from the test that you have selected. The code coverage report will be generated in HTML and will be presented with Firefox.
</li></ul>
<!-- 
NewPP limit report
Preprocessor node count: 27/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:9211-0!1!0!!en!2!edit=0 and timestamp 20111118125746 -->

 <!-- end content --></body></html>
