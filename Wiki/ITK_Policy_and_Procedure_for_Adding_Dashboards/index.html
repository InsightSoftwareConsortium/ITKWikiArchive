<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>ITK/Policy and Procedure for Adding Dashboards</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"da9df6d0c88ca25c62801949","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ITK/Policy_and_Procedure_for_Adding_Dashboards","wgTitle":"ITK/Policy and Procedure for Adding Dashboards","wgCurRevisionId":56358,"wgRevisionId":56358,"wgArticleId":3056,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"ITK/Policy_and_Procedure_for_Adding_Dashboards","wgRelevantArticleId":3056,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],
"wgRestrictionMove":[],"wgRedirectedFrom":"ITK_Policy_and_Procedure_for_Adding_Dashboards","wgInternalRedirectTargetUrl":"/ITKWikiArchive/Wiki/ITK/Policy_and_Procedure_for_Adding_Dashboards"};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","skins.monobook.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","site","mediawiki.page.ready","mediawiki.toc","skins.monobook.scripts"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link href="/Wiki/load.php?lang=en&amp;modules=skins.monobook.styles&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<script async="" src="/Wiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/Wiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<meta content="MediaWiki 1.38.6" name="generator"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" name="viewport"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/Wiki/opensearch_desc.php" rel="search" title="KitwarePublic (en)" type="application/opensearchdescription+xml"/>
<link href="https://public.kitware.com/Wiki/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="https://creativecommons.org/licenses/by/2.5/" rel="license"/>
<link href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="KitwarePublic Atom feed" type="application/atom+xml"/>
<link href="https://public.kitware.com/ITKWikiArchive/Wiki/ITK/Policy_and_Procedure_for_Adding_Dashboards" rel="canonical"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ITK_Policy_and_Procedure_for_Adding_Dashboards rootpage-ITK skin-monobook action-view skin--responsive"><!-- start content -->
<div class="mw-body-content mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p><b>This page is under construction</b>
</p><p>The Nightly and Continuous build/test of ITK is essential to its survival.
</p><p><br/>
The <a class="external text" href="http://open.cdash.org/index.php?project=Insight" rel="nofollow">ITK Dashboard</a> presents dashboard submissions from the ITK community. The dashboards represent unique configurations of hardware platforms, operating systems, compilers, compiler options and ITK options.
</p><p><br/>
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Policy"><span class="tocnumber">1</span> <span class="toctext">Policy</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Terminology"><span class="tocnumber">2</span> <span class="toctext">Terminology</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Build_Submission_Types"><span class="tocnumber">2.1</span> <span class="toctext">Build Submission Types</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Build_Types_(Compilation_Modes)"><span class="tocnumber">2.2</span> <span class="toctext">Build Types (Compilation Modes)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Procedure"><span class="tocnumber">3</span> <span class="toctext">Procedure</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Preparing_a_Dashboard_Submission"><span class="tocnumber">3.1</span> <span class="toctext">Preparing a Dashboard Submission</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#New,_easier_way"><span class="tocnumber">3.1.1</span> <span class="toctext">New, easier way</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Scheduling_a_Dashboard_Submission"><span class="tocnumber">3.2</span> <span class="toctext">Scheduling a Dashboard Submission</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Advanced_Features"><span class="tocnumber">3.3</span> <span class="toctext">Advanced Features</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Run_as_a_specific_user"><span class="tocnumber">3.3.1</span> <span class="toctext">Run as a specific user</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Memory_Checker"><span class="tocnumber">3.3.2</span> <span class="toctext">Memory Checker</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Coverage"><span class="tocnumber">3.3.3</span> <span class="toctext">Coverage</span></a>
<ul>
<li class="toclevel-4 tocsection-13"><a href="#Configuring_GCOV_Coverage"><span class="tocnumber">3.3.3.1</span> <span class="toctext">Configuring GCOV Coverage</span></a></li>
<li class="toclevel-4 tocsection-14"><a href="#Configuring_BullsEye_Coverage"><span class="tocnumber">3.3.3.2</span> <span class="toctext">Configuring BullsEye Coverage</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-15"><a href="#Style"><span class="tocnumber">3.3.4</span> <span class="toctext">Style</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2><span class="mw-headline" id="Policy">Policy</span></h2>
<p>Each dashboard shall present a unique combination of hardware/compiler/OS, optional features and compiler options. The dashboard submitter will monitor the ITK dashboard on a routine basis to make sure that the dashboard is reporting as a Nightly or Continuous build.
</p>
<h2><span class="mw-headline" id="Terminology">Terminology</span></h2>
<h3><span class="mw-headline" id="Build_Submission_Types">Build Submission Types</span></h3>
<p>You will see several groups of builds reported on the dashboard. They are as follows:
</p>
<ul><li>Nightly - These are submissions that users have volunteered to submit on a nightly basis.</li>
<li>Continuous - These are dedicated machines that build and test the software every 1 to 3 hours. These submissions help catch problems as soon as possible.</li>
<li>Experimental - This type of build is typically for when a developer has made a change to the code and wants to 'prove' that he has done everything in his ability to test it before committing it to the repository. CDash@home builds also show up as Experimental.</li>
<li>Nightly Expected - These are identical to 'nightly' submissions, but they are 'expected' in the sense that the user has promised that this build will be submitted every night. This ensures that there is at least one of each reasonable system configuration tested every day.</li>
<li>Nightly Applications - This is a Nightly build of the InsightApplications module</li>
<li>Nightly Releases - This is a Nightly build of one official release of ITK, for example, a Nightly build of the ITK 3.12 branch.</li>
<li>Nightly External - This are Nightly builds of external projects that use ITK. They are used as early warnings for detecting if any changes in ITK compromise its backward compatibility</li>
<li>Coverage- These are reports of code coverage. They are typically generated with "gcov", although they could be generated with BullsEye as well.</li>
<li>Style - These are builds that run KWStyle on the ITK source code in order to detect potential coding style violations.</li>
<li>Dynamic Analysis - These are builds in which the tests are run through a memory checker, typically Valgrind, in order to detect uninitialized variables, memory leaks and other run-time problems.</li></ul>
<p>The average user would want to either submit a Nightly or Experimental build.
</p><p><br/>
Note:
</p><p>Nightly and Continuous builds will perform the following sequence of steps:
</p>
<ol><li>Update (git fetch, git reset)</li>
<li>CMake configuration</li>
<li>Build (compile and link)</li>
<li>Run tests</li>
<li>Submit results to the Dashboard</li></ol>
<p>Experimental builds, on the other hand, will skip the update step, and start with the configuration step.
</p>
<h3><span id="Build_Types_.28Compilation_Modes.29"></span><span class="mw-headline" id="Build_Types_(Compilation_Modes)">Build Types (Compilation Modes)</span></h3>
<p>Another option that must be set before submitting a dashboard is the build type. The choices are as follows:
</p>
<ul><li>Debug - Compile and build with debugging information enabled (e.g. -g in gcc),</li>
<li>RelWithDebInfo - Compile with optimization options and debug sysmbols.</li>
<li>MinSizeRel -</li>
<li>Release - Enable optimization (e.g. -O3 in gcc), disable debugging symbols.</li></ul>
<h2><span class="mw-headline" id="Procedure">Procedure</span></h2>
<p>The recommended method for dashboard submission is using <a class="external text" href="http://www.cmake.org/Wiki/CMake_Scripting_Of_CTest" rel="nofollow">ctest scripts</a>. Specifically, a small script that includes itk_common.cmake to do the bulk of the work. See <a class="external text" href="http://www.itk.org/ITKWikiArchive/Wiki/ITK/Git/Dashboard" rel="nofollow">here for itk_common.cmake details</a>. (See also the commented notes at the top of that script.)
</p>
<h3><span class="mw-headline" id="Preparing_a_Dashboard_Submission">Preparing a Dashboard Submission</span></h3>
<h4><span id="New.2C_easier_way"></span><span class="mw-headline" id="New,_easier_way">New, easier way</span></h4>
<ol><li>Follow <a class="external text" href="http://www.itk.org/ITKWikiArchive/Wiki/ITK/Git/Dashboard" rel="nofollow">the directions here</a> to get the latest itk_common.cmake.</li>
<li>Write a small ctest script according to the instructions at the top of itk_common.cmake.
<ol><li>ctest -V -S <i>your_script_file</i></li></ol></li>
<li>See also, the <a class="external text" href="http://insightsoftwareconsortium.github.io/ITKBarCamp-doc/SoftwareQuality/DashboardSubmission/index.html" rel="nofollow">ITK Bar Camp article</a>.</li></ol>
<h3><span class="mw-headline" id="Scheduling_a_Dashboard_Submission">Scheduling a Dashboard Submission</span></h3>
<ol><li>Dashboard submissions can be automatically run with <a class="external text" href="http://www.cmake.org/Wiki/CMake_Scripting_Of_CTest#Setting_Up_Cron.2FScheduler" rel="nofollow">Cron or Scheduler</a>.</li>
<li>The ITK Nightly start time (from CTestConfig.cmake) is 01:00 UTC</li>
<li>Builds should be scheduled such that they start <b>after</b> the 01:00 UTC Nightly start time (that's 8:00 pm Eastern time in the winter, 9:00 pm Eastern time in the summer, so start builds after 9:00 pm Eastern in your local time and it will always be after the nightly start time all year round...) Dashboard best practice: <a class="external text" href="http://www.kitware.com/blog/home/post/77" rel="nofollow">avoid problems when moving</a> to or from <a class="external text" href="http://en.wikipedia.org/wiki/Daylight_saving_time" rel="nofollow">daylight saving time</a></li></ol>
<h3><span class="mw-headline" id="Advanced_Features">Advanced Features</span></h3>
<h4><span class="mw-headline" id="Run_as_a_specific_user">Run as a specific user</span></h4>
<p>It is a good idea to create a specific user with limited rights to run the nightly test. For example a user called <b>dashboard</b>.
</p>
<pre>  adduser dashboard
  su dashboard
</pre>
<p>And follow the procedure mentioned above to set up the nighly test. Quota limitation for disk space and limited directory traversal can be applied to this user.
</p>
<h4><span class="mw-headline" id="Memory_Checker">Memory Checker</span></h4>
<h4><span class="mw-headline" id="Coverage">Coverage</span></h4>
<p>Code coverage can be performed with
</p>
<ul><li>gcov under Linux</li>
<li>BullsEye under Linux and Windows</li></ul>
<p>These two applications compute code coverage in different ways
</p>
<ul><li>gcov computes <b>line coverage</b></li>
<li>BullsEye computes <b>branch coverage</b></li></ul>
<h5><span class="mw-headline" id="Configuring_GCOV_Coverage">Configuring GCOV Coverage</span></h5>
<ul><li>Make sure that the program gcov is installed in your system and that its version matches the version of the gcc compiler that you are using for building ITK. For example
<ul><li>gcov --version</li>
<li>gcc --version</li></ul></li>
<li>Run ccmake in the binary directory where you build ITK
<ul><li>Add to CMAKE_CXX_FLAGS the flags: -g -O0  -fprofile-arcs -ftest-coverage</li>
<li>Add to CMAKE_C_FLAGS the flags: -g -O0  -fprofile-arcs -ftest-coverage</li>
<li>If using gcc4x, then the coverage flags must also be passed to the linker,
<ul><li><a class="external free" href="http://www.itk.org/pipermail/insight-users/2007-August/023289.html" rel="nofollow">http://www.itk.org/pipermail/insight-users/2007-August/023289.html</a></li>
<li>Therefore, add also CMAKE_EXE_LINKER_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage</li></ul></li>
<li>Make sure that the COVERAGE_COMMAND, CMake variable is pointing to the gcov executable that you want to use (the one that matches the version of gcc that you are using for this ITK build).</li>
<li>Type "c" for Configuring</li>
<li>Type "g" for Generating the Makefiles</li></ul></li>
<li>At this point your build is configured for reporting code coverage</li>
<li>Test it by submitting an Experimental build using any of the two following commands:
<ul><li>make Experimental</li>
<li>ctest -D Experimental</li></ul></li>
<li>The coverage submission should appear close to the bottom of the ITK Dashboard</li></ul>
<p><br/>
To make this part of a Nightly or Continuous build, it is convenient to incorporate these settings into the CTest script that you are using for driving the build. The typical way of incorporating these option is to insert the following lines
</p>
<pre>  COVERAGE_COMMAND:FILEPATH=/usr/bin/gcov-3.4
  CMAKE_CXX_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage
  CMAKE_C_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage
  CMAKE_EXE_LINKER_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage
</pre>
<p>into the block:
</p>
<pre>   SET (CTEST_INITIAL_CACHE "
   ...
   )
</pre>
<p><br/>
</p>
<h5><span class="mw-headline" id="Configuring_BullsEye_Coverage">Configuring BullsEye Coverage</span></h5>
<p>See instructions at
</p><p><a class="external free" href="http://www.itk.org/Wiki/CTest:Coverage#C.2FC.2B.2B_Coverage_with_Bullseye" rel="nofollow">http://www.itk.org/Wiki/CTest:Coverage#C.2FC.2B.2B_Coverage_with_Bullseye</a>
</p>
<h4><span class="mw-headline" id="Style">Style</span></h4>
<p>OS Compiler Debug/Release Static/Shared 32/64 bit Wrapping
</p>
<!-- 
NewPP limit report
Cached time: 20240519085205
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.010 seconds
Real time usage: 0.010 seconds
Preprocessor visited node count: 45/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:3056-0!canonical and timestamp 20240519085205 and revision id 56358. Serialized with JSON.
 -->
</div>
</div>

<!-- end content --></body>
</html>