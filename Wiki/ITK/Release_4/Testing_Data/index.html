<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>ITK/Release 4/Testing Data</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"9a6dd95a90f0a3f684cc2a90","wgCSPNonce":!1,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"ITK/Release_4/Testing_Data","wgTitle":"ITK/Release 4/Testing Data","wgCurRevisionId":44203,"wgRevisionId":44203,"wgArticleId":6786,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"ITK/Release_4/Testing_Data","wgRelevantArticleId":6786,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready",
"noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","skins.monobook.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.monobook.scripts"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="/Wiki/load.php?lang=en&amp;modules=skins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<script async="" src="/Wiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/Wiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook"/>
<meta name="generator" content="MediaWiki 1.37.1"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0"/>
<link rel="shortcut icon" href="/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/Wiki/opensearch_desc.php" title="KitwarePublic (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://public.kitware.com/Wiki/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by/2.5/"/>
<link rel="alternate" type="application/atom+xml" title="KitwarePublic Atom feed" href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ITK_Release_4_Testing_Data rootpage-ITK skin-monobook action-view skin--responsive"><!-- start content -->
				<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#The_Challenge"><span class="tocnumber">1</span> <span class="toctext">The Challenge</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#MIDAS_Proposal"><span class="tocnumber">2</span> <span class="toctext">MIDAS Proposal</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Data_on_MIDAS"><span class="tocnumber">2.1</span> <span class="toctext">Data on MIDAS</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#MIDAS_-_CMake"><span class="tocnumber">2.2</span> <span class="toctext">MIDAS - CMake</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#How_to_find_Checksum_files"><span class="tocnumber">2.2.1</span> <span class="toctext">How to find Checksum files</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#How_to_locally_cache_testing_data"><span class="tocnumber">2.2.2</span> <span class="toctext">How to locally cache testing data</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="The_Challenge">The Challenge</span></h1>
<ul><li>Data used for testing can be large.
<ul><li>ITK has three types of Data (Input, Baselines and "Large Data"). At this point, neither Baselines or Input are very large (subjective remark). "Large Data" would benefit from the MIDAS solution.</li></ul></li>
<li>Data should not be stored along with the source code
<ul><li>Lorensen comment: This is an opinion, not a fact.</li></ul></li>
<li>Data files change along with the evolution of the code
<ul><li>So we have to track their specific versions.</li></ul></li>
<li>Adding new files should be quick and easy, ideally with a single command line
<ul><li>This was possible with ITK 3.x.</li></ul></li>
<li>There must be a way to pull down the testing data corpus as a whole. You must be able to run CTest without an Internet connection.</li></ul>
<h1><span class="mw-headline" id="MIDAS_Proposal">MIDAS Proposal</span></h1>
<ul><li>Store ITK Testing Data in MIDAS
<ul><li>Lorensen Proposal: Keep Input and Baseline data in the ITK repository. Store Large data in MIDAS.</li></ul></li>
<li>Download it at run time during ITK testing.</li></ul>
<h3><span class="mw-headline" id="Data_on_MIDAS">Data on MIDAS</span></h3>
<p>At:
</p>
<ul><li><a rel="nofollow" class="external free" href="http://midas.kitware.com/community/view/7">http://midas.kitware.com/community/view/7</a></li></ul>
<h3><span class="mw-headline" id="MIDAS_-_CMake">MIDAS - CMake</span></h3>
<p>The related CMake files can be found in the directory
</p>
<pre>   ITK/CMake
</pre>
<p>The file
</p>
<pre>   ExternalData.cmake 
</pre>
<p>contains CMake functions that will download specific files and put them in a given directory.
</p><p>The file
</p>
<pre>   ITKExternalData.cmake
</pre>
<p>Contains the default file URL's.
</p><p>An itk_add_test function to automatically resolve DATA{} lines is found in ITK/CMakeLists.txt.
</p>
<h4><span class="mw-headline" id="How_to_find_Checksum_files">How to find Checksum files</span></h4>
<ul><li>Go to the MIDAS page of the image of your interest
<ul><li>From: <a rel="nofollow" class="external free" href="http://midas.kitware.com/community/view/7">http://midas.kitware.com/community/view/7</a>
<ul><li>For example, the image "cthead1.png" can be found at: <a rel="nofollow" class="external free" href="http://midas.kitware.com/item/view/258">http://midas.kitware.com/item/view/258</a></li></ul></li></ul></li>
<li>Click on the check-box "Advanced View" at the top of the page.
<ul><li>The checksums of individual files will be displayed under the filenames</li>
<li>A "Download MD5 Key File" link will be shown in front of the checksum number</li></ul></li>
<li>Click on the "Download MD5 Key File" and save the file in the directory
<ul><li>ITK/Testing/MIDAS_Keys</li></ul></li></ul>
<h4><span class="mw-headline" id="How_to_locally_cache_testing_data">How to locally cache testing data</span></h4>
<p>It is easiest to first download all data by running an ITK build with BUILD_TESTING ON.  This will download the required data into
</p>
<pre> &lt;build_dir&gt;/ExternalData/Objects
</pre>
<p>Copy the testing data into the desired location, e.g.
</p>
<pre> cp -r &lt;build_dir&gt;/ExternalData/Objects/MD5 /var/bigharddrive/
</pre>
<p>Or
</p>
<pre> rsync -av &lt;build_dir&gt;/ExternalData/Objects/MD5 /var/bigharddrive/
</pre>
<p>In new builds, point the build to the local cache by setting the CMake cache variable <b>ExternalData_URL_TEMPLATES</b>.  The setting in this case would be
</p>
<pre> file:///var/bigharddrive/%(algo)/%(hash)
</pre>
<p>All testing data that can be found in the local cache will be used first, and the search will fall back on the default URL's if a file cannot be found.
</p>
<!-- 
NewPP limit report
Cached time: 20220924172237
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.005 seconds
Real time usage: 0.006 seconds
Preprocessor visited node count: 17/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:6786-0!canonical and timestamp 20220924172237 and revision id 44203. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://public.kitware.com/Wiki/index.php?title=ITK/Release_4/Testing_Data&amp;oldid=44203">https://public.kitware.com/Wiki/index.php?title=ITK/Release_4/Testing_Data&amp;oldid=44203</a>"</div></div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
				<!-- end content --></body></html>