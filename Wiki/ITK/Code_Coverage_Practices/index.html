<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>ITK/Code Coverage Practices - KitwarePublic</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"14f22db862d0b18d6b8db1e8","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ITK/Code_Coverage_Practices","wgTitle":"ITK/Code Coverage Practices","wgCurRevisionId":45779,"wgRevisionId":45779,"wgArticleId":9211,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"ITK/Code_Coverage_Practices","wgRelevantArticleId":9211,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready",
"user.styles":"ready","user":"ready","user.options":"loading","skins.monobook.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.monobook.scripts"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/Wiki/load.php?lang=en&amp;modules=skins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<script async="" src="/Wiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/Wiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook"/>
<meta name="generator" content="MediaWiki 1.38.6"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0"/>
<link rel="shortcut icon" href="/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/Wiki/opensearch_desc.php" title="KitwarePublic (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://public.kitware.com/Wiki/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by/2.5/"/>
<link rel="alternate" type="application/atom+xml" title="KitwarePublic Atom feed" href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ITK_Code_Coverage_Practices rootpage-ITK skin-monobook action-view skin--responsive"><!-- start content -->
				<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_to_compute_Code_Coverage_locally"><span class="tocnumber">2</span> <span class="toctext">How to compute Code Coverage locally</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Step_1"><span class="tocnumber">2.1</span> <span class="toctext">Step 1</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Step_2"><span class="tocnumber">2.2</span> <span class="toctext">Step 2</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Step_3"><span class="tocnumber">2.3</span> <span class="toctext">Step 3</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Step_4"><span class="tocnumber">2.4</span> <span class="toctext">Step 4</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Step_5"><span class="tocnumber">2.5</span> <span class="toctext">Step 5</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview">Overview</span></h1>
<ul><li>The target code coverage is 95%</li>
<li>Historically we have only achieved 84%.</li>
<li>The practices described in this page should help us reach the target.</li></ul>
<h1><span class="mw-headline" id="How_to_compute_Code_Coverage_locally">How to compute Code Coverage locally</span></h1>
<h2><span class="mw-headline" id="Step_1">Step 1</span></h2>
<ul><li>Use Linux or Mac</li></ul>
<h2><span class="mw-headline" id="Step_2">Step 2</span></h2>
<ul><li>Add the CMake flags:</li></ul>
<pre>      CMAKE_CXX_FLAGS:STRING=-g -O0  -fprofile-arcs -ftest-coverage
      CMAKE_C_FLAGS:STRING= -g -O0  -fprofile-arcs -ftest-coverage
</pre>
<h2><span class="mw-headline" id="Step_3">Step 3</span></h2>
<ul><li>Configure to compile ITK for Debug</li>
<li>by setting the CMake variable</li></ul>
<pre>                    CMAKE_BUILD_TYPE  Debug
</pre>
<h2><span class="mw-headline" id="Step_4">Step 4</span></h2>
<ul><li>From the binary directory type the "ctest" expression that select the tests that you want use to generate coverage (Ideally this should only need to be the unit tests of the class in question).</li>
<li>For example:</li></ul>
<pre>               ctest  -R   itkHDF5ImageIOTest   -V   -N
</pre>
<ul><li>This will print to the console the command line instructions needed to run the tests (-V option), but without running the tests (-N option).</li></ul>
<h2><span class="mw-headline" id="Step_5">Step 5</span></h2>
<ul><li>From the binary directory type the path to this script in the ITK source tree and add the selection expression that you put in front of ctest.</li>
<li>For example:</li></ul>
<pre>       computeCodeCoverageLocallyForOneTest.sh ./Modules/IO/HDF5 -R  itkHDF5ImageIOTest
</pre>
<ul><li>This will run the selected tests in ITK and generate code coverage for the entire toolkit, but only from the test that you have selected. The code coverage report will be generated in HTML and will be presented with Firefox.</li></ul>
<!-- 
NewPP limit report
Cached time: 20231004071753
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.005 seconds
Real time usage: 0.005 seconds
Preprocessor visited node count: 21/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:9211-0!canonical and timestamp 20231004071753 and revision id 45779. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://public.kitware.com/Wiki/index.php?title=ITK/Code_Coverage_Practices&amp;oldid=45779">https://public.kitware.com/Wiki/index.php?title=ITK/Code_Coverage_Practices&amp;oldid=45779</a>"</div></div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
				<!-- end content --></body>
</html>