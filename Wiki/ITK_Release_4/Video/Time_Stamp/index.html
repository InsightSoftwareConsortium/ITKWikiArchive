<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>ITK Release 4/Video/Time Stamp</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"e738bf6958beb0cb20468d8d","wgCSPNonce":!1,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"ITK_Release_4/Video/Time_Stamp","wgTitle":"ITK Release 4/Video/Time Stamp","wgCurRevisionId":34934,"wgRevisionId":34934,"wgArticleId":8234,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"ITK_Release_4/Video/Time_Stamp","wgRelevantArticleId":8234,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":
"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.monobook.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.monobook.scripts"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link href="/Wiki/load.php?lang=en&amp;modules=ext.pygments%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<script async="" src="/Wiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/Wiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<meta content="MediaWiki 1.37.1" name="generator"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" name="viewport"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/Wiki/opensearch_desc.php" rel="search" title="KitwarePublic (en)" type="application/opensearchdescription+xml"/>
<link href="https://public.kitware.com/Wiki/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="https://creativecommons.org/licenses/by/2.5/" rel="license"/>
<link href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="KitwarePublic Atom feed" type="application/atom+xml"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ITK_Release_4_Video_Time_Stamp rootpage-ITK_Release_4 skin-monobook action-view skin--responsive"><!-- start content -->
<div class="mw-body-content mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Reference_Systems"><span class="tocnumber">1</span> <span class="toctext">Reference Systems</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#VRPN_-_UNC"><span class="tocnumber">1.1</span> <span class="toctext">VRPN - UNC</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#URL"><span class="tocnumber">1.1.1</span> <span class="toctext">URL</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Time_Stamp_Structure"><span class="tocnumber">1.1.2</span> <span class="toctext">Time Stamp Structure</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#OpenCV"><span class="tocnumber">1.2</span> <span class="toctext">OpenCV</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#KWSys"><span class="tocnumber">1.3</span> <span class="toctext">KWSys</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#ITK_RealTimeClock"><span class="tocnumber">1.4</span> <span class="toctext">ITK RealTimeClock</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#System_Time"><span class="tocnumber">1.5</span> <span class="toctext">System Time</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Scales"><span class="tocnumber">2</span> <span class="toctext">Scales</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Units"><span class="tocnumber">3</span> <span class="toctext">Units</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Proposal"><span class="tocnumber">4</span> <span class="toctext">Proposal</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="Reference_Systems">Reference Systems</span></h1>
<h2><span class="mw-headline" id="VRPN_-_UNC">VRPN - UNC</span></h2>
<h3><span class="mw-headline" id="URL">URL</span></h3>
<p><a class="external free" href="http://www.cs.unc.edu/Research/vrpn/vrpn_getting_started.html" rel="nofollow">http://www.cs.unc.edu/Research/vrpn/vrpn_getting_started.html</a>
</p>
<h3><span class="mw-headline" id="Time_Stamp_Structure">Time Stamp Structure</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">struct</span> <span class="n">timeval</span>
  <span class="p">{</span>
    <span class="n">__time_t</span> <span class="n">tv_sec</span><span class="p">;</span>		<span class="cm">/* Seconds.  */</span>
    <span class="n">__suseconds_t</span> <span class="n">tv_usec</span><span class="p">;</span>	<span class="cm">/* Microseconds.  */</span>
  <span class="p">};</span>
</pre></div>
<h2><span class="mw-headline" id="OpenCV">OpenCV</span></h2>
<ul><li>include/opencv/cv.h:   double timestamp</li>
<li>src/cv/_cvipp.h:       float  timestamp</li>
<li>3rdparty/include/ffmpeg_/avformat.h: int64_t timestamp;</li></ul>
<h2><span class="mw-headline" id="KWSys">KWSys</span></h2>
<ul><li>static double GetTime();</li></ul>
<h2><span class="mw-headline" id="ITK_RealTimeClock">ITK RealTimeClock</span></h2>
<ul><li><a class="external text" href="http://itk.org/gitweb?p=ITK.git;a=blob;f=Code/Common/itkRealTimeClock.h;h=48cde7370a827dc58ead2f9b6e57782e670e190e;hb=6172fc3b6f4a3b925cc4922f2093719e64104a9a" rel="nofollow">itkRealTimeClock.h</a></li>
<li><a class="external text" href="http://itk.org/gitweb?p=ITK.git;a=blob;f=Code/Common/itkRealTimeClock.cxx;h=6935197e15f261c1c087f27a39ccb1433346a644;hb=6172fc3b6f4a3b925cc4922f2093719e64104a9a" rel="nofollow">itkRealTimeClock.cxx</a></li></ul>
<h2><span class="mw-headline" id="System_Time">System Time</span></h2>
<ul><li><a class="external free" href="http://en.wikipedia.org/wiki/System_time" rel="nofollow">http://en.wikipedia.org/wiki/System_time</a></li></ul>
<h1><span class="mw-headline" id="Scales">Scales</span></h1>
<p>If counting from a given starting point (forward):
</p><p><br/>
</p>
<ul><li>int32 : can count in microseconds, up to 4.5 years
<ul><li>2**32 / (30 * 3600 * 24.0 * 365 ) = 4.5 years</li></ul></li></ul>
<ul><li>double : can count in microseconds, up to 285 years (before losing any precision)
<ul><li>2^53 / ( 1000000 * 3600 * 24.0 * 365 ) = 285</li>
<li>after that it will be counting in tens of microseconds...</li></ul></li></ul>
<ul><li>int64 : can count in microseconds, up to 584942 years
<ul><li>2**64 / ( 1000000 * 3600 * 24.0 * 365 ) = 584942</li>
<li>(or in nanoseconds up to 584 years)</li></ul></li></ul>
<p><br/>
If counting relative times:
</p>
<ul><li>int32 -&gt; will use the sign, and can count (-2.4, +2.4) years</li>
<li>double -&gt; and can count (-142, +142) years</li>
<li>int64 -&gt; (-292471, +292471) years</li></ul>
<h1><span class="mw-headline" id="Units">Units</span></h1>
<ul><li>Should the time units be specified ?
<ul><li>Use microseconds ?</li></ul></li></ul>
<h1><span class="mw-headline" id="Proposal">Proposal</span></h1>
<ul><li>Use double as internal representation</li>
<li>Use micro-seconds as unit</li>
<li>Have convenience methods to return time in other units
<ul><li>seconds, hours, days</li></ul></li>
<li>Have convenience methods for computing differences between two times</li>
<li><b>Encapsulated type</b>:
<ul><li>External time representation = double in microseconds</li>
<li>Internal time representation is private and is not exposed</li></ul></li>
<li>Two Classes
<ul><li>TimeStamp</li>
<li>TimeInterval</li>
<li>TimeInterval = TimeStamp - TimeStamp</li>
<li>TimeStamp = TimeStamp + TimeInterval</li>
<li>Time operations will be implemented in these two classes.</li>
<li>They will have to be as efficient as double or int64 arithmetics.</li></ul></li>
<li>"<b>Get</b>" methods only available for debugging
<ul><li>TimeStamp.GetTimeInSecondsSince1970();</li></ul></li>
<li>Serialization
<ul><li>ostream &lt;&lt; (controlled by ITK)</li>
<li>istream &gt;&gt; should reconstruct the object.</li>
<li>when sent to file formats then we will be subject to the file format representation (just as we are with images).</li></ul></li>
<li>Manage conversion between Dates and microseconds by using the Unix conversion algorithms.</li>
<li><b>Internal</b> implementation (private)
<ul><li>TimeStamp will use a timeval struct</li>
<li>TimeInterval will use a double</li></ul></li>
<li><b>Error</b> management: Needs more discussion
<ul><li>Do we want an ErrorValue to be stored in the TimeStamp and / or the TimeInterval ?</li>
<li>Should error be managed only through exceptions ?</li>
<li>Should there be a default value ?
<ul><li>If so, should there be a way of checking for it ?</li>
<li>How to avoid the subsequent code to be saturated with "if"s.</li></ul></li></ul></li></ul>
<!-- 
NewPP limit report
Cached time: 20220624085900
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.013 seconds
Real time usage: 0.152 seconds
Preprocessor visited node count: 38/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 517/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:8234-0!canonical and timestamp 20220624085900 and revision id 34934. Serialized with JSON.
 -->
</div>
</div>

<!-- end content --></body></html>