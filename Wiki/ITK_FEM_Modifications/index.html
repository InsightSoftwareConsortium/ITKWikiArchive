<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<title>ITK FEM Modifications</title>
<script>document.documentElement.className="client-js";RLCONF={"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"ITK_FEM_Modifications","wgTitle":"ITK FEM Modifications","wgCurRevisionId":38512,"wgRevisionId":38512,"wgArticleId":8978,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"ITK_FEM_Modifications","wgRelevantArticleId":8978,"wgRequestId":"04370d0a1b3129b6f0f0a14a","wgCSPNonce":!1,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,
"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.toc.styles":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.monobook.responsive":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.monobook.mobile"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.tokens@tffin",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link href="/Wiki/load.php?lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.toc.styles%7Cskins.monobook.responsive&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<script async="" src="/Wiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<!--[if lt IE 9]><link rel="stylesheet" href="/Wiki/skins/MonoBook/resources/screen-desktop.css?74a6a" media="screen"/><![endif]--><!--[if IE 6]><link rel="stylesheet" href="/Wiki/skins/MonoBook/resources/IE60Fixes.css?1208f" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/Wiki/skins/MonoBook/resources/IE70Fixes.css?4e4d4" media="screen"/><![endif]-->
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/Wiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook" rel="stylesheet"/>
<meta content="MediaWiki 1.34.1" name="generator"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" name="viewport"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/Wiki/opensearch_desc.php" rel="search" title="KitwarePublic (en)" type="application/opensearchdescription+xml"/>
<link href="https://itk.org/Wiki/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link href="https://creativecommons.org/licenses/by/2.5/" rel="license"/>
<link href="/Wiki/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="KitwarePublic Atom feed" type="application/atom+xml"/>
<!--[if lt IE 9]><script src="/Wiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ITK_FEM_Modifications rootpage-ITK_FEM_Modifications skin-monobook action-view"><!-- start content --><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>This page describes the changes being made to the ITK FEM framework. The current repository for this work is hosted on <a class="external text" href="https://github.com/kiranhs/ITKv4FEM-Kiran" rel="nofollow">github</a>
</p><p><br/>
</p>
<div class="toc" id="toc"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Solver"><span class="tocnumber">1</span> <span class="toctext">Solver</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#FEMObject"><span class="tocnumber">2</span> <span class="toctext">FEMObject</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#FEMSpatialObject"><span class="tocnumber">3</span> <span class="toctext">FEMSpatialObject</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Using_FEM_Framework"><span class="tocnumber">4</span> <span class="toctext">Using FEM Framework</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Ongoing_Work"><span class="tocnumber">5</span> <span class="toctext">Ongoing Work</span></a></li>
</ul>
</div>
<h2><span class="mw-headline" id="Solver">Solver</span></h2>
<ul><li>Derive from <b>ProcessObject</b> and template over <b>dimension</b>
<ul><li>template &lt;unsigned int VDimension = 3&gt; class ITK_EXPORT Solver1 : public ProcessObject</li></ul></li>
<li>Remove all I/O from Solver</li>
<li>Use SetInput() and GetOutput() methods to set the FE problem and to get the deformed mesh</li>
<li>Update() method will execute the Solver</li>
<li>Retain the following methods
<ul><li>SetLinearSystemWrapper()</li>
<li>GetLinearSystemWrapper()</li>
<li>GetElementAtPoint()</li>
<li>GetDeformationEnergy()</li>
<li>SetTimeStep()</li>
<li>GetSolution()</li></ul></li></ul>
<h2><span class="mw-headline" id="FEMObject">FEMObject</span></h2>
<p>A new object type was added, <b>itk::fem::FEMObject</b>, that is used to define the FEM problem. The class derives from <b>DataObject</b> and is templated over dimension.
</p>
<ul><li>template &lt;unsigned int VDimension = 3&gt; class ITK_EXPORT FEMObject : public DataObject</li>
<li>Class Methods
<ul><li>GetNumberOfDegreesOfFreedom()</li>
<li>GetNumberOfMultiFreedomConstraints()</li>
<li>GetNumberOfNodes</li>
<li>GetNumberOfElements</li>
<li>GetNumberOfLoads(void)</li>
<li>GetNumberOfMaterials(void)</li>
<li>AddNextElement(Element::Pointer e)</li>
<li>InsertElement(Element::Pointer e, ElementIdentifier index)</li>
<li>AddNextNode(Node::Pointer e)</li>
<li>InsertNode(Node::Pointer e, NodeIdentifier index)</li>
<li>AddNextMaterial(Material::Pointer mat)</li>
<li>InsertMaterial(Material::Pointer e, MaterialIdentifier index)</li>
<li>AddNextLoad(Load::Pointer ld)</li>
<li>InsertLoad(Load::Pointer ld, LoadIdentifier index)</li>
<li>GetElement(ElementIdentifier index)</li>
<li>GetElementWithGlobalNumber(int globalNumber)</li>
<li>GetNode(NodeIdentifier index)</li>
<li>GetNodeWithGlobalNumber(int globalNumber)</li>
<li>GetMaterial(MaterialIdentifier index)</li>
<li>GetMaterialWithGlobalNumber(int globalNumber)</li>
<li>GetLoad(LoadIdentifier index)</li>
<li>GetLoadWithGlobalNumber(int globalNumber)</li>
<li>RenumberNodeContainer()</li>
<li>FinalizeMesh()</li></ul></li></ul>
<h2><span class="mw-headline" id="FEMSpatialObject">FEMSpatialObject</span></h2>
<p>This class provides a spatial object wrapper around the FEMObject. This class facilities the I/O which is now supported by the MetaIO library.
</p>
<h2><span class="mw-headline" id="Using_FEM_Framework">Using FEM Framework</span></h2>
<pre> const unsigned int Dimension = 3;
 typedef itk::SpatialObject&lt;Dimension&gt;         SpatialObjectType;
 typedef SpatialObjectType::Pointer            SpatialObjectPointer;

 // Read the FEM Problem
 typedef itk::SpatialObjectReader&lt;Dimension&gt;    SpatialObjectReaderType;
 typedef SpatialObjectReaderType::Pointer            SpatialObjectReaderPointer;
 SpatialObjectReaderPointer SpatialReader = SpatialObjectReaderType::New();
 SpatialReader-&gt;SetFileName( argv[1] );
 SpatialReader-&gt;Update();

 typedef itk::FEMObjectSpatialObject&lt;Dimension&gt;    FEMObjectSpatialObjectType;
 typedef FEMObjectSpatialObjectType::Pointer       FEMObjectSpatialObjectPointer;
 FEMObjectSpatialObjectType::Pointer femSO = 
      dynamic_cast&lt;FEMObjectSpatialObjectType*&gt;((*(children-&gt;begin())).GetPointer());
 femSO-&gt;GetFEMObject()-&gt;FinalizeMesh();

 
 // Solve FEM Problem
 typedef itk::fem::Solver1&lt;Dimension&gt;    Solver3DType;
 Solver3DType::Pointer solver = Solver3DType::New();
 solver-&gt;SetInput( femSO-&gt;GetFEMObject() );
 solver-&gt;Update( );
 

 // Write the solution - (i.e. deformed mesh)
 FEMObjectSpatialObjectType::Pointer femSODef = FEMObjectSpatialObjectType::New();
 femSODef-&gt;SetFEMObject(solver-&gt;GetOutput());

 typedef itk::SpatialObjectWriter&lt;Dimension&gt;  SpatialObjectWriterType;
 typedef SpatialObjectWriterType::Pointer     SpatialObjectWriterPointer;
 SpatialObjectWriterPointer SpatialWriter = SpatialObjectWriterType::New();
 SpatialWriter-&gt;SetInput(femSODef);
 SpatialWriter-&gt;SetFileName( argv[2] );
 SpatialWriter-&gt;Update();
</pre>
<h2><span class="mw-headline" id="Ongoing_Work">Ongoing Work</span></h2>
<ul><li>Remove old FEM Factory infrastructure</li>
<li>Finalize how to handle Image derived loads</li>
<li>Update FEM Registration</li>
<li>Merge with Modular ITK</li>
<li>Further code cleanup and testing</li></ul>
<!-- 
NewPP limit report
Cached time: 20211204032937
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.022 seconds
Real time usage: 0.022 seconds
Preprocessor visited node count: 15/1000000
Preprocessor generated node count: 0/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key KitwarePublicWikiDB:pcache:idhash:8978-0!canonical and timestamp 20211204032937 and revision id 38512
 -->
</div></div>
<!-- end content --></body></html>